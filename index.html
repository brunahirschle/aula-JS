<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Cadastro de Usuário</h1>

    <form id="userForm">
    <label for="name">Nome:</label>
    <input type="text" id="name" />
    <div class="error" id="error-name"></div>

    <label for="username">Usuário:</label>
    <input type="text" id="username" />
    <div class="error" id="error-username"></div>

    <label for="password">Senha:</label>
    <input type="password" id="password" />
    <div class="error" id="error-password"></div>

    <label for="email">Email:</label>
    <input type="email" id="email" />
    <div class="error" id="error-email"></div>

    <label for="age">Idade:</label>
    <input type="number" id="age" min="0" />
    <div class="error" id="error-age"></div>

    <button type="submit">Cadastrar</button>
    <div class="success" id="success-message"></div>
    </form>
    
    <script>
    const form = document.getElementById("userForm");

    form.addEventListener("submit", function (e) {
        e.preventDefault(); 
        document.querySelectorAll(".error").forEach(el => el.textContent = "");
        document.getElementById("success-message").textContent = "";

        try {
        const name = document.getElementById("name").value.trim();
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();
        const email = document.getElementById("email").value.trim();
        const age = parseInt(document.getElementById("age").value.trim());

        if (!name) throw { field: "name", message: "O nome é obrigatório." };
        if (!username) throw { field: "username", message: "O usuário é obrigatório." };
        if (!password) throw { field: "password", message: "A senha é obrigatória." };

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email) throw { field: "email", message: "O email é obrigatório." };
        if (!emailRegex.test(email)) throw { field: "email", message: "Email inválido." };

        if (isNaN(age)) throw { field: "age", message: "A idade é obrigatória." };
        if (age < 18) throw { field: "age", message: "É necessário ter 18 anos ou mais." };

        document.getElementById("success-message").textContent = "Cadastro realizado com sucesso!";
        form.reset();
        } catch (error) {
            if (error.field && error.message) {
            document.getElementById(`error-${error.field}`).textContent = error.message;
            } else {
            alert("Ocorreu um erro inesperado.");
            }
        }
    });

    </script>

    
</body>
</html>